<?xml version="1.0"?>

<xaf>
	<sql-statements package="report.scheduling">
		<statement name="id">
			App::Statements::Report::Scheduling
		</statement>

		<statement name="sel_DetailAppointmentStatus">
			
			SELECT
			(SELECT InitCap(simple_name)
			FROM 	person
			WHERE 	person_id = ea.value_text
			) as patient_name,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Account Number'
			) as account_number,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Chart Number'
			) as chart_number,
			(SELECT initcap(simple_name)
			FROM person
			WHERE person_id = ea.value_textb
			) as physician_name,
			(SELECT org_id
			FROM org
			WHERE org_internal_id = e.facility_id
			) as org_name,
			(SELECT caption FROM Appt_Status WHERE id = e.event_status) as appt_status,
			TO_CHAR(e.start_time - ?, 'MM/DD/YYYY HH12:MI AM') as start_time,
			initcap(e.subject) as reason_visit,
			e.scheduled_by_id as scheduled_by,
			e.checkin_by_id as checkin_by,
			e.checkout_by_id as checkout_by,
			ea.value_text as patient_id,
			ea.value_textb as physician_id,
			to_char(e.scheduled_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as scheduled_stamp,
			to_char(e.checkin_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkin_stamp,
			to_char(e.checkout_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkout_stamp,
			e.event_id,
			aat.caption
			FROM	Appt_Attendee_Type aat, Event e, Event_Attribute ea
			WHERE	e.event_status = ?
			AND	(? is NULL or e.facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND e.event_id = ea.parent_id
			AND e.start_time &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.start_time &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND aat.id = ea.value_int
			ORDER BY 5, 7

			<report>
				<column index="0" heading="Patient" url="javascript:chooseItemForParent('/person/#11#/profile')"/>
				<column index="2" heading="Chart"/>
				<column index="1" heading="Account"/>
				<column index="3" heading="Physician"/>
				<column index="4" heading="Facility"/>
				<column index="5" heading="Appt Status"/>
				<column index="6" heading="Appointment Time"/>
				<column index="7" heading="Reason for Visit"/>
				<column index="8" heading="Scheduled By"/>
				<column index="9" heading="Checkin By"/>
				<column index="10" heading="Checkout By"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						colIdx => '0'
						head => 'Patient'
						hint => 'View #17# #11# Profile'
						options => '1'
						url => 'javascript:chooseItemForParent('/person/#11#/profile')'

					}
					1 => {
						colIdx => '2'
						head => 'Chart'

					}
					2 => {
						colIdx => '1'
						head => 'Account'

					}
					3 => {
						colIdx => '3'
						head => 'Physician'
						options => '1'

					}
					4 => {
						colIdx => '4'
						head => 'Facility'

					}
					5 => {
						colIdx => '5'
						head => 'Appt Status'
						options => '1'

					}
					6 => {
						colIdx => '6'
						head => 'Appointment Time'
						hint => 'Event ID #16#'

					}
					7 => {
						colIdx => '7'
						head => 'Reason for Visit'

					}
					8 => {
						colIdx => '8'
						head => 'Scheduled By'
						hint => '#13#'

					}
					9 => {
						colIdx => '9'
						head => 'Checkin By'
						hint => '#14#'

					}
					10 => {
						colIdx => '10'
						head => 'Checkout By'
						hint => '#15#'

					}

				}

			-->
		</statement>

		<statement name="sel_DetailDiscardAppointment">
			
			SELECT
			(SELECT InitCap(simple_name)
			FROM 	person
			WHERE 	person_id = ea.value_text
			) as patient_name,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Account Number'
			) as account_number,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Chart Number'
			) as chart_number,
			(SELECT initcap(simple_name)
			FROM person
			WHERE person_id = ea.value_textb
			) as physician_name,
			(SELECT org_id
			FROM org
			WHERE org_internal_id = e.facility_id
			) as org_name,
			(SELECT caption FROM Appt_Discard_Type WHERE id = e.discard_type) as appt_status,
			TO_CHAR(e.start_time - ?, 'MM/DD/YYYY HH12:MI AM') as start_time,
			initcap(e.subject) as reason_visit,
			e.scheduled_by_id as scheduled_by,
			e.checkin_by_id as checkin_by,
			e.checkout_by_id as checkout_by,
			ea.value_text as patient_id,
			ea.value_textb as physician_id,
			to_char(e.scheduled_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as scheduled_stamp,
			to_char(e.checkin_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkin_stamp,
			to_char(e.checkout_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkout_stamp,
			e.event_id,
			aat.caption
			, discard_remarks 
			FROM	Appt_Attendee_Type aat, Event e, Event_Attribute ea
			WHERE	e.event_status = ?
			AND	(? is NULL or e.facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND e.event_id = ea.parent_id
			AND e.start_time &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.start_time &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND aat.id = ea.value_int
			ORDER BY 5, 7

			<report>
				<column index="0" heading="Patient" url="javascript:chooseItemForParent('/person/#11#/profile')"/>
				<column index="2" heading="Chart"/>
				<column index="1" heading="Account"/>
				<column index="3" heading="Physician"/>
				<column index="4" heading="Facility"/>
				<column index="5" heading="Appt Status"/>
				<column index="18" heading="Remarks"/>
				<column index="6" heading="Appointment Time"/>
				<column index="7" heading="Reason for Visit"/>
				<column index="8" heading="Scheduled By"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						colIdx => '0'
						head => 'Patient'
						hint => 'View #17# #11# Profile'
						options => '1'
						url => 'javascript:chooseItemForParent('/person/#11#/profile')'

					}
					1 => {
						colIdx => '2'
						head => 'Chart'

					}
					2 => {
						colIdx => '1'
						head => 'Account'

					}
					3 => {
						colIdx => '3'
						head => 'Physician'
						options => '1'

					}
					4 => {
						colIdx => '4'
						head => 'Facility'

					}
					5 => {
						colIdx => '5'
						head => 'Appt Status'
						options => '1'

					}
					6 => {
						colIdx => '18'
						head => 'Remarks'

					}
					7 => {
						colIdx => '6'
						head => 'Appointment Time'
						hint => 'Event ID #16#'

					}
					8 => {
						colIdx => '7'
						head => 'Reason for Visit'

					}
					9 => {
						colIdx => '8'
						head => 'Scheduled By'
						hint => '#13#'

					}

				}

			-->
		</statement>

		<statement name="sel_appointments_byStatus">
			
			select caption as appointments, count(caption) as count, event_status
			from Appt_Status, Event, Event_Attribute
			where value_type = 333
			and Event.event_id = Event_Attribute.parent_id
			and (? is NULL or Event_Attribute.value_textb = ?)
			and (? is NULL or Event.facility_id = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = Event.facility_id
			)
			and Event.start_time &gt;= to_date(?, 'MM/DD/YYYY') + ?
			and Event.start_time &lt; to_date(?, 'MM/DD/YYYY') + 1 + ?
			and Appt_Status.id = Event.event_status
			group by caption, event_status
			
			<report>
				<column heading="Appointments" url="javascript:doActionPopup(
							'#hrefSelfPopup#&detail=appointments&event_status=#2#&caption=#0#',
							null,'location,status,width=800,height=600,scrollbars,resizable')
						"/>
				<column heading="Count"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						head => 'Appointments'
						hint => 'View Details'
						url => 'javascript:doActionPopup(
							'#hrefSelfPopup#&detail=appointments&event_status=#2#&caption=#0#',
							null,'location,status,width=800,height=600,scrollbars,resizable')
						'

					}
					1 => {
						dAlign => 'right'
						head => 'Count'
						summarize => 'sum'

					}

				}

			-->
		</statement>

		<statement name="sel_dateEntered">
			
			SELECT to_char(e.scheduled_stamp -?, 'MM/DD/YYYY'), count(*)
			FROM 	Event e, Event_Attribute ea
			WHERE	(? is NULL or facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND ea.value_type = 333
			AND e.scheduled_stamp &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.scheduled_stamp &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND e.event_id = ea.parent_id
			GROUP BY to_char(e.scheduled_stamp -?, 'MM/DD/YYYY')
			ORDER BY 1 desc
			
			<report>
				<column heading="Date" url="javascript:doActionPopup('#hrefSelfPopup#&detail=date_entered&entered=#&{?}#',
						null,'location,status,width=800,height=600,scrollbars,resizable')"/>
				<column heading="Count"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						head => 'Date'
						hint => 'View Details'
						url => 'javascript:doActionPopup('#hrefSelfPopup#&detail=date_entered&entered=#&{?}#',
						null,'location,status,width=800,height=600,scrollbars,resizable')'

					}
					1 => {
						dAlign => 'right'
						head => 'Count'
						summarize => 'sum'

					}

				}

			-->
		</statement>

		<statement name="sel_detailDateEntered">
			
			SELECT
			(SELECT InitCap(simple_name)
			FROM 	person
			WHERE 	person_id = ea.value_text
			) as patient_name,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Account Number'
			) as account_number,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Chart Number'
			) as chart_number,
			(SELECT initcap(simple_name)
			FROM person
			WHERE person_id = ea.value_textb
			) as physician_name,
			(SELECT org_id
			FROM org
			WHERE org_internal_id = e.facility_id
			) as org_name,
			(SELECT caption FROM Appt_Status WHERE id = e.event_status) as appt_status,
			TO_CHAR(e.start_time - ?, 'MM/DD/YYYY HH12:MI AM') as start_time,
			initcap(e.subject) as reason_visit,
			e.scheduled_by_id as scheduled_by,
			e.checkin_by_id as checkin_by,
			e.checkout_by_id as checkout_by,
			ea.value_text as patient_id,
			ea.value_textb as physician_id,
			to_char(e.scheduled_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as scheduled_stamp,
			to_char(e.checkin_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkin_stamp,
			to_char(e.checkout_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkout_stamp,
			e.event_id,
			aat.caption
			FROM	Appt_Attendee_Type aat, Event e, Event_Attribute ea
			WHERE	
			e.scheduled_stamp &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			and e.scheduled_stamp &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND	(? is NULL or e.facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND e.event_id = ea.parent_id
			AND e.scheduled_stamp &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.scheduled_stamp &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND aat.id = ea.value_int
			ORDER BY 5, 7

			<report>
				<column index="0" heading="Patient" url="javascript:chooseItemForParent('/person/#11#/profile')"/>
				<column index="2" heading="Chart"/>
				<column index="1" heading="Account"/>
				<column index="3" heading="Physician"/>
				<column index="4" heading="Facility"/>
				<column index="5" heading="Appt Status"/>
				<column index="6" heading="Appointment Time"/>
				<column index="7" heading="Reason for Visit"/>
				<column index="8" heading="Scheduled By"/>
				<column index="9" heading="Checkin By"/>
				<column index="10" heading="Checkout By"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						colIdx => '0'
						head => 'Patient'
						hint => 'View #17# #11# Profile'
						options => '1'
						url => 'javascript:chooseItemForParent('/person/#11#/profile')'

					}
					1 => {
						colIdx => '2'
						head => 'Chart'

					}
					2 => {
						colIdx => '1'
						head => 'Account'

					}
					3 => {
						colIdx => '3'
						head => 'Physician'
						options => '1'

					}
					4 => {
						colIdx => '4'
						head => 'Facility'

					}
					5 => {
						colIdx => '5'
						head => 'Appt Status'
						options => '1'

					}
					6 => {
						colIdx => '6'
						head => 'Appointment Time'
						hint => 'Event ID #16#'

					}
					7 => {
						colIdx => '7'
						head => 'Reason for Visit'

					}
					8 => {
						colIdx => '8'
						head => 'Scheduled By'
						hint => '#13#'

					}
					9 => {
						colIdx => '9'
						head => 'Checkin By'
						hint => '#14#'

					}
					10 => {
						colIdx => '10'
						head => 'Checkout By'
						hint => '#15#'

					}

				}

			-->
		</statement>

		<statement name="sel_detailMissingEncounter">
			
			SELECT
			(SELECT InitCap(simple_name)
			FROM 	person
			WHERE 	person_id = ea.value_text
			) as patient_name,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Account Number'
			) as account_number,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Chart Number'
			) as chart_number,
			(SELECT initcap(simple_name)
			FROM person
			WHERE person_id = ea.value_textb
			) as physician_name,
			(SELECT org_id
			FROM org
			WHERE org_internal_id = e.facility_id
			) as org_name,
			(SELECT caption FROM Appt_Status WHERE id = e.event_status) as appt_status,
			TO_CHAR(e.start_time - ?, 'MM/DD/YYYY HH12:MI AM') as start_time,
			initcap(e.subject) as reason_visit,
			e.scheduled_by_id as scheduled_by,
			e.checkin_by_id as checkin_by,
			e.checkout_by_id as checkout_by,
			ea.value_text as patient_id,
			ea.value_textb as physician_id,
			to_char(e.scheduled_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as scheduled_stamp,
			to_char(e.checkin_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkin_stamp,
			to_char(e.checkout_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkout_stamp,
			e.event_id,
			aat.caption
			FROM	Appt_Attendee_Type aat, Event e, Event_Attribute ea
			WHERE	
			e.checkin_stamp &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			and e.checkin_stamp &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			and e.checkout_stamp is NULL
			AND	(? is NULL or e.facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND e.event_id = ea.parent_id
			AND e.start_time &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.start_time &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND e.event_status &lt; 3
			AND aat.id = ea.value_int
			ORDER BY 5, 7

			<report>
				<column index="0" heading="Patient" url="javascript:chooseItemForParent('/person/#11#/profile')"/>
				<column index="2" heading="Chart"/>
				<column index="1" heading="Account"/>
				<column index="3" heading="Physician"/>
				<column index="4" heading="Facility"/>
				<column index="5" heading="Appt Status"/>
				<column index="6" heading="Appointment Time"/>
				<column index="7" heading="Reason for Visit"/>
				<column index="8" heading="Scheduled By"/>
				<column index="9" heading="Checkin By"/>
				<column index="10" heading="Checkout By"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						colIdx => '0'
						head => 'Patient'
						hint => 'View #17# #11# Profile'
						options => '1'
						url => 'javascript:chooseItemForParent('/person/#11#/profile')'

					}
					1 => {
						colIdx => '2'
						head => 'Chart'

					}
					2 => {
						colIdx => '1'
						head => 'Account'

					}
					3 => {
						colIdx => '3'
						head => 'Physician'
						options => '1'

					}
					4 => {
						colIdx => '4'
						head => 'Facility'

					}
					5 => {
						colIdx => '5'
						head => 'Appt Status'
						options => '1'

					}
					6 => {
						colIdx => '6'
						head => 'Appointment Time'
						hint => 'Event ID #16#'

					}
					7 => {
						colIdx => '7'
						head => 'Reason for Visit'

					}
					8 => {
						colIdx => '8'
						head => 'Scheduled By'
						hint => '#13#'

					}
					9 => {
						colIdx => '9'
						head => 'Checkin By'
						hint => '#14#'

					}
					10 => {
						colIdx => '10'
						head => 'Checkout By'
						hint => '#15#'

					}

				}

			-->
		</statement>

		<statement name="sel_detailPatientsCPT">
			
			SELECT
			(SELECT InitCap(simple_name)
			FROM 	person
			WHERE 	person_id = ea.value_text
			) as patient_name,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Account Number'
			) as account_number,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Chart Number'
			) as chart_number,
			(SELECT initcap(simple_name)
			FROM person
			WHERE person_id = ea.value_textb
			) as physician_name,
			(SELECT org_id
			FROM org
			WHERE org_internal_id = e.facility_id
			) as org_name,
			(SELECT caption FROM Appt_Status WHERE id = e.event_status) as appt_status,
			TO_CHAR(e.start_time - ?, 'MM/DD/YYYY HH12:MI AM') as start_time,
			initcap(e.subject) as reason_visit,
			e.scheduled_by_id as scheduled_by,
			e.checkin_by_id as checkin_by,
			e.checkout_by_id as checkout_by,
			ea.value_text as patient_id,
			ea.value_textb as physician_id,
			to_char(e.scheduled_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as scheduled_stamp,
			to_char(e.checkin_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkin_stamp,
			to_char(e.checkout_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkout_stamp,
			e.event_id,
			aat.caption
			FROM	Appt_Attendee_Type aat, Event e, Event_Attribute ea
			,	transaction t,
			invoice i,
			invoice_item ii
			WHERE	ii.parent_id = i.invoice_id
			AND ii.code = ?
			AND ((ii.data_text_b is NOT NULL AND ii.data_text_b != 'void')
			OR ii.data_text_b is NULL)
			AND ii.item_type != 7
			AND i.main_transaction = t.trans_id
			AND i.invoice_status != 16
			AND i.parent_invoice_id is NULL
			AND e.event_id = t.parent_event_id
			AND	(? is NULL or e.facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND e.event_id = ea.parent_id
			AND e.start_time &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.start_time &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND e.event_status &lt; 3
			AND aat.id = ea.value_int
			ORDER BY 5, 7

			<report>
				<column index="0" heading="Patient" url="javascript:chooseItemForParent('/person/#11#/profile')"/>
				<column index="2" heading="Chart"/>
				<column index="1" heading="Account"/>
				<column index="3" heading="Physician"/>
				<column index="4" heading="Facility"/>
				<column index="5" heading="Appt Status"/>
				<column index="6" heading="Appointment Time"/>
				<column index="7" heading="Reason for Visit"/>
				<column index="8" heading="Scheduled By"/>
				<column index="9" heading="Checkin By"/>
				<column index="10" heading="Checkout By"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						colIdx => '0'
						head => 'Patient'
						hint => 'View #17# #11# Profile'
						options => '1'
						url => 'javascript:chooseItemForParent('/person/#11#/profile')'

					}
					1 => {
						colIdx => '2'
						head => 'Chart'

					}
					2 => {
						colIdx => '1'
						head => 'Account'

					}
					3 => {
						colIdx => '3'
						head => 'Physician'
						options => '1'

					}
					4 => {
						colIdx => '4'
						head => 'Facility'

					}
					5 => {
						colIdx => '5'
						head => 'Appt Status'
						options => '1'

					}
					6 => {
						colIdx => '6'
						head => 'Appointment Time'
						hint => 'Event ID #16#'

					}
					7 => {
						colIdx => '7'
						head => 'Reason for Visit'

					}
					8 => {
						colIdx => '8'
						head => 'Scheduled By'
						hint => '#13#'

					}
					9 => {
						colIdx => '9'
						head => 'Checkin By'
						hint => '#14#'

					}
					10 => {
						colIdx => '10'
						head => 'Checkout By'
						hint => '#15#'

					}

				}

			-->
		</statement>

		<statement name="sel_detailPatientsProduct">
			
			SELECT
			(SELECT InitCap(simple_name)
			FROM 	person
			WHERE 	person_id = ea.value_text
			) as patient_name,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Account Number'
			) as account_number,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Chart Number'
			) as chart_number,
			(SELECT initcap(simple_name)
			FROM person
			WHERE person_id = ea.value_textb
			) as physician_name,
			(SELECT org_id
			FROM org
			WHERE org_internal_id = e.facility_id
			) as org_name,
			(SELECT caption FROM Appt_Status WHERE id = e.event_status) as appt_status,
			TO_CHAR(e.start_time - ?, 'MM/DD/YYYY HH12:MI AM') as start_time,
			initcap(e.subject) as reason_visit,
			e.scheduled_by_id as scheduled_by,
			e.checkin_by_id as checkin_by,
			e.checkout_by_id as checkout_by,
			ea.value_text as patient_id,
			ea.value_textb as physician_id,
			to_char(e.scheduled_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as scheduled_stamp,
			to_char(e.checkin_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkin_stamp,
			to_char(e.checkout_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkout_stamp,
			e.event_id,
			aat.caption
			FROM	Appt_Attendee_Type aat, Event e, Event_Attribute ea
			,invoice i,
			invoice_billing ib,
			insurance i,
			claim_type ct,
			transaction t
			WHERE		ct.caption = ?
			AND	e.event_id = t.parent_event_id
			AND	i.main_transaction = t.trans_id
			AND	ib.bill_id = i.billing_id
			AND	ib.bill_ins_id = i.ins_internal_id
			AND	ct.id = i.ins_type
			AND	(? is NULL or e.facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND e.event_id = ea.parent_id
			AND e.start_time &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.start_time &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND e.event_status &lt; 3
			AND aat.id = ea.value_int
			ORDER BY 5, 7

			<report>
				<column index="0" heading="Patient" url="javascript:chooseItemForParent('/person/#11#/profile')"/>
				<column index="2" heading="Chart"/>
				<column index="1" heading="Account"/>
				<column index="3" heading="Physician"/>
				<column index="4" heading="Facility"/>
				<column index="5" heading="Appt Status"/>
				<column index="6" heading="Appointment Time"/>
				<column index="7" heading="Reason for Visit"/>
				<column index="8" heading="Scheduled By"/>
				<column index="9" heading="Checkin By"/>
				<column index="10" heading="Checkout By"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						colIdx => '0'
						head => 'Patient'
						hint => 'View #17# #11# Profile'
						options => '1'
						url => 'javascript:chooseItemForParent('/person/#11#/profile')'

					}
					1 => {
						colIdx => '2'
						head => 'Chart'

					}
					2 => {
						colIdx => '1'
						head => 'Account'

					}
					3 => {
						colIdx => '3'
						head => 'Physician'
						options => '1'

					}
					4 => {
						colIdx => '4'
						head => 'Facility'

					}
					5 => {
						colIdx => '5'
						head => 'Appt Status'
						options => '1'

					}
					6 => {
						colIdx => '6'
						head => 'Appointment Time'
						hint => 'Event ID #16#'

					}
					7 => {
						colIdx => '7'
						head => 'Reason for Visit'

					}
					8 => {
						colIdx => '8'
						head => 'Scheduled By'
						hint => '#13#'

					}
					9 => {
						colIdx => '9'
						head => 'Checkin By'
						hint => '#14#'

					}
					10 => {
						colIdx => '10'
						head => 'Checkout By'
						hint => '#15#'

					}

				}

			-->
		</statement>

		<statement name="sel_detailPatientsProductSelfPay">
			
			SELECT
			(SELECT InitCap(simple_name)
			FROM 	person
			WHERE 	person_id = ea.value_text
			) as patient_name,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Account Number'
			) as account_number,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Chart Number'
			) as chart_number,
			(SELECT initcap(simple_name)
			FROM person
			WHERE person_id = ea.value_textb
			) as physician_name,
			(SELECT org_id
			FROM org
			WHERE org_internal_id = e.facility_id
			) as org_name,
			(SELECT caption FROM Appt_Status WHERE id = e.event_status) as appt_status,
			TO_CHAR(e.start_time - ?, 'MM/DD/YYYY HH12:MI AM') as start_time,
			initcap(e.subject) as reason_visit,
			e.scheduled_by_id as scheduled_by,
			e.checkin_by_id as checkin_by,
			e.checkout_by_id as checkout_by,
			ea.value_text as patient_id,
			ea.value_textb as physician_id,
			to_char(e.scheduled_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as scheduled_stamp,
			to_char(e.checkin_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkin_stamp,
			to_char(e.checkout_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkout_stamp,
			e.event_id,
			aat.caption
			FROM	Appt_Attendee_Type aat, Event e, Event_Attribute ea
			,invoice i,
			invoice_billing ib,
			claim_type ct,
			transaction t
			WHERE		ct.caption = ?
			AND	e.event_id = t.parent_event_id
			AND	i.main_transaction = t.trans_id
			AND	ib.bill_id = i.billing_id
			AND	ib.bill_ins_id is NULL
			AND	ct.id = 0
			AND	(? is NULL or e.facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND e.event_id = ea.parent_id
			AND e.start_time &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.start_time &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND e.event_status &lt; 3
			AND aat.id = ea.value_int
			ORDER BY 5, 7

			<report>
				<column index="0" heading="Patient" url="javascript:chooseItemForParent('/person/#11#/profile')"/>
				<column index="2" heading="Chart"/>
				<column index="1" heading="Account"/>
				<column index="3" heading="Physician"/>
				<column index="4" heading="Facility"/>
				<column index="5" heading="Appt Status"/>
				<column index="6" heading="Appointment Time"/>
				<column index="7" heading="Reason for Visit"/>
				<column index="8" heading="Scheduled By"/>
				<column index="9" heading="Checkin By"/>
				<column index="10" heading="Checkout By"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						colIdx => '0'
						head => 'Patient'
						hint => 'View #17# #11# Profile'
						options => '1'
						url => 'javascript:chooseItemForParent('/person/#11#/profile')'

					}
					1 => {
						colIdx => '2'
						head => 'Chart'

					}
					2 => {
						colIdx => '1'
						head => 'Account'

					}
					3 => {
						colIdx => '3'
						head => 'Physician'
						options => '1'

					}
					4 => {
						colIdx => '4'
						head => 'Facility'

					}
					5 => {
						colIdx => '5'
						head => 'Appt Status'
						options => '1'

					}
					6 => {
						colIdx => '6'
						head => 'Appointment Time'
						hint => 'Event ID #16#'

					}
					7 => {
						colIdx => '7'
						head => 'Reason for Visit'

					}
					8 => {
						colIdx => '8'
						head => 'Scheduled By'
						hint => '#13#'

					}
					9 => {
						colIdx => '9'
						head => 'Checkin By'
						hint => '#14#'

					}
					10 => {
						colIdx => '10'
						head => 'Checkout By'
						hint => '#15#'

					}

				}

			-->
		</statement>

		<statement name="sel_detailPatientsSeenByPatientType">
			
			SELECT
			(SELECT InitCap(simple_name)
			FROM 	person
			WHERE 	person_id = ea.value_text
			) as patient_name,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Account Number'
			) as account_number,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Chart Number'
			) as chart_number,
			(SELECT initcap(simple_name)
			FROM person
			WHERE person_id = ea.value_textb
			) as physician_name,
			(SELECT org_id
			FROM org
			WHERE org_internal_id = e.facility_id
			) as org_name,
			(SELECT caption FROM Appt_Status WHERE id = e.event_status) as appt_status,
			TO_CHAR(e.start_time - ?, 'MM/DD/YYYY HH12:MI AM') as start_time,
			initcap(e.subject) as reason_visit,
			e.scheduled_by_id as scheduled_by,
			e.checkin_by_id as checkin_by,
			e.checkout_by_id as checkout_by,
			ea.value_text as patient_id,
			ea.value_textb as physician_id,
			to_char(e.scheduled_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as scheduled_stamp,
			to_char(e.checkin_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkin_stamp,
			to_char(e.checkout_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkout_stamp,
			e.event_id,
			aat.caption
			FROM	Appt_Attendee_Type aat, Event e, Event_Attribute ea
			WHERE	ea.value_int = ? and event_status = 2 
			AND	(? is NULL or e.facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND e.event_id = ea.parent_id
			AND e.start_time &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.start_time &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND aat.id = ea.value_int
			ORDER BY 5, 7

			<report>
				<column index="0" heading="Patient" url="javascript:chooseItemForParent('/person/#11#/profile')"/>
				<column index="2" heading="Chart"/>
				<column index="1" heading="Account"/>
				<column index="3" heading="Physician"/>
				<column index="4" heading="Facility"/>
				<column index="5" heading="Appt Status"/>
				<column index="6" heading="Appointment Time"/>
				<column index="7" heading="Reason for Visit"/>
				<column index="8" heading="Scheduled By"/>
				<column index="9" heading="Checkin By"/>
				<column index="10" heading="Checkout By"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						colIdx => '0'
						head => 'Patient'
						hint => 'View #17# #11# Profile'
						options => '1'
						url => 'javascript:chooseItemForParent('/person/#11#/profile')'

					}
					1 => {
						colIdx => '2'
						head => 'Chart'

					}
					2 => {
						colIdx => '1'
						head => 'Account'

					}
					3 => {
						colIdx => '3'
						head => 'Physician'
						options => '1'

					}
					4 => {
						colIdx => '4'
						head => 'Facility'

					}
					5 => {
						colIdx => '5'
						head => 'Appt Status'
						options => '1'

					}
					6 => {
						colIdx => '6'
						head => 'Appointment Time'
						hint => 'Event ID #16#'

					}
					7 => {
						colIdx => '7'
						head => 'Reason for Visit'

					}
					8 => {
						colIdx => '8'
						head => 'Scheduled By'
						hint => '#13#'

					}
					9 => {
						colIdx => '9'
						head => 'Checkin By'
						hint => '#14#'

					}
					10 => {
						colIdx => '10'
						head => 'Checkout By'
						hint => '#15#'

					}

				}

			-->
		</statement>

		<statement name="sel_detailPatientsSeenByPhysician">
			
			SELECT
			(SELECT InitCap(simple_name)
			FROM 	person
			WHERE 	person_id = ea.value_text
			) as patient_name,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Account Number'
			) as account_number,
			(SELECT	value_text
			FROM	Person_Attribute pa
			WHERE	pa.parent_id = ea.value_text
			AND	pa.item_name = 'Patient/Chart Number'
			) as chart_number,
			(SELECT initcap(simple_name)
			FROM person
			WHERE person_id = ea.value_textb
			) as physician_name,
			(SELECT org_id
			FROM org
			WHERE org_internal_id = e.facility_id
			) as org_name,
			(SELECT caption FROM Appt_Status WHERE id = e.event_status) as appt_status,
			TO_CHAR(e.start_time - ?, 'MM/DD/YYYY HH12:MI AM') as start_time,
			initcap(e.subject) as reason_visit,
			e.scheduled_by_id as scheduled_by,
			e.checkin_by_id as checkin_by,
			e.checkout_by_id as checkout_by,
			ea.value_text as patient_id,
			ea.value_textb as physician_id,
			to_char(e.scheduled_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as scheduled_stamp,
			to_char(e.checkin_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkin_stamp,
			to_char(e.checkout_stamp - ?, 'MM/DD/YYYY HH12:MI AM') as checkout_stamp,
			e.event_id,
			aat.caption
			FROM	Appt_Attendee_Type aat, Event e, Event_Attribute ea
			WHERE	 event_status = 2 AND ea.value_textB = ?
			AND	(? is NULL or e.facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND e.event_id = ea.parent_id
			AND e.start_time &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.start_time &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND aat.id = ea.value_int
			ORDER BY 5, 7

			<report>
				<column index="0" heading="Patient" url="javascript:chooseItemForParent('/person/#11#/profile')"/>
				<column index="2" heading="Chart"/>
				<column index="1" heading="Account"/>
				<column index="3" heading="Physician"/>
				<column index="4" heading="Facility"/>
				<column index="5" heading="Appt Status"/>
				<column index="6" heading="Appointment Time"/>
				<column index="7" heading="Reason for Visit"/>
				<column index="8" heading="Scheduled By"/>
				<column index="9" heading="Checkin By"/>
				<column index="10" heading="Checkout By"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						colIdx => '0'
						head => 'Patient'
						hint => 'View #17# #11# Profile'
						options => '1'
						url => 'javascript:chooseItemForParent('/person/#11#/profile')'

					}
					1 => {
						colIdx => '2'
						head => 'Chart'

					}
					2 => {
						colIdx => '1'
						head => 'Account'

					}
					3 => {
						colIdx => '3'
						head => 'Physician'
						options => '1'

					}
					4 => {
						colIdx => '4'
						head => 'Facility'

					}
					5 => {
						colIdx => '5'
						head => 'Appt Status'
						options => '1'

					}
					6 => {
						colIdx => '6'
						head => 'Appointment Time'
						hint => 'Event ID #16#'

					}
					7 => {
						colIdx => '7'
						head => 'Reason for Visit'

					}
					8 => {
						colIdx => '8'
						head => 'Scheduled By'
						hint => '#13#'

					}
					9 => {
						colIdx => '9'
						head => 'Checkin By'
						hint => '#14#'

					}
					10 => {
						colIdx => '10'
						head => 'Checkout By'
						hint => '#15#'

					}

				}

			-->
		</statement>

		<statement name="sel_missingEncounter">
			
			SELECT to_char(e.CHECKIN_STAMP - ?, 'MM/DD/YYYY'), count (*)
			FROM 	Event e, Event_Attribute ea
			WHERE	(? is NULL or facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND ea.value_type = 333
			AND e.start_time &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.start_time &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND e.event_id = ea.parent_id
			AND e.event_status &lt; 3
			AND e.checkin_stamp is NOT NULL
			AND e.checkout_stamp is NULL
			GROUP BY to_char(e.CHECKIN_STAMP - ?, 'MM/DD/YYYY')
			ORDER BY 1 desc
			
			<report>
				<column heading="Check In Date" url="javascript:doActionPopup('#hrefSelfPopup#&detail=missing_encounter&encounter=#&{?}#',
						null,'location,status,width=800,height=600,scrollbars,resizable')"/>
				<column heading="Count"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						head => 'Check In Date'
						hint => 'View Details'
						url => 'javascript:doActionPopup('#hrefSelfPopup#&detail=missing_encounter&encounter=#&{?}#',
						null,'location,status,width=800,height=600,scrollbars,resizable')'

					}
					1 => {
						dAlign => 'right'
						head => 'Count'
						summarize => 'sum'

					}

				}

			-->
		</statement>

		<statement name="sel_patientsCPT">
			
			SELECT	ii.code,count(distinct(e.event_id)) as count
			FROM	Event e,
			Event_Attribute ea,
			transaction t,
			invoice i,
			invoice_item ii
			WHERE	ea.value_type = 333
			AND ((ii.data_text_b is NOT NULL AND ii.data_text_b != 'void')
			OR ii.data_text_b is NULL)
			AND ii.item_type != 7
			AND (? is NULL or e.facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 	'x'
			FROM 	org
			WHERE 	owner_org_id = ?
			AND 	org_internal_id = e.facility_id
			)
			AND e.start_time &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.start_time &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND e.event_id = ea.parent_id
			AND e.event_id = t.parent_event_id
			AND e.event_status &lt; 3
			AND i.main_transaction = t.trans_id
			AND i.invoice_status != 16
			AND i.parent_invoice_id is NULL
			AND ii.parent_id = i.invoice_id
			AND ii.code is not NULL
			GROUP BY ii.code
			ORDER BY 1
			
			<report>
				<column heading="Procedure Code" url="javascript:doActionPopup('#hrefSelfPopup#&detail=CPT&CPT=#&{?}#',
					null,'location,status,width=800,height=600,scrollbars,resizable')"/>
				<column heading="Count"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						head => 'Procedure Code'
						hint => 'View Details'
						url => 'javascript:doActionPopup('#hrefSelfPopup#&detail=CPT&CPT=#&{?}#',
					null,'location,status,width=800,height=600,scrollbars,resizable')'

					}
					1 => {
						dAlign => 'right'
						head => 'Count'
						summarize => 'sum'

					}

				}

			-->
		</statement>

		<statement name="sel_patientsProduct">
			
			SELECT	ct.caption, count(distinct e.event_id) as count
			FROM claim_type ct,
			insurance ins,
			invoice_billing ib,
			invoice i,
			transaction t,
			Event_Attribute ea,
			Event e
			WHERE e.start_time &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND e.start_time &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND e.event_status &lt; 3
			AND (? is NULL or e.facility_id = ?)
			AND ea.parent_id = e.event_id
			AND ea.value_type = 333
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND t.parent_event_id = e.event_id
			AND i.main_transaction = t.trans_id
			AND i.parent_invoice_id is NULL
			AND i.invoice_status != 16
			AND ib.bill_id = i.billing_id
			AND ins.ins_internal_id = ib.bill_ins_id
			AND ct.id = ins.ins_type
			GROUP BY ct.caption
			UNION
			SELECT	ct.caption, count(distinct e.event_id) as count
			FROM claim_type ct,
			insurance ins,
			invoice_billing ib,
			invoice i,
			transaction t,
			Event_Attribute ea,
			Event e
			WHERE e.start_time &gt;= TO_DATE(?, 'MM/DD/YYYY') + ?
			AND	e.start_time &lt; TO_DATE(?, 'MM/DD/YYYY') + 1 + ?
			AND e.event_status &lt; 3
			AND (? is NULL or e.facility_id = ?)
			AND	ea.parent_id = e.event_id
			AND ea.value_type = 333
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			AND t.parent_event_id = e.event_id
			AND i.main_transaction = t.trans_id
			AND i.parent_invoice_id is NULL
			AND i.invoice_status != 16
			AND ib.bill_id = i.billing_id
			AND ib.bill_ins_id is NULL
			AND ct.id = 0
			GROUP BY ct.caption
			
			<report>
				<column heading="Product Name" url="javascript:doActionPopup('#hrefSelfPopup#&detail=product&product=#&{?}#',
				null,'location,status,width=800,height=600,scrollbars,resizable')"/>
				<column heading="Count"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						head => 'Product Name'
						hint => 'View Details'
						url => 'javascript:doActionPopup('#hrefSelfPopup#&detail=product&product=#&{?}#',
				null,'location,status,width=800,height=600,scrollbars,resizable')'

					}
					1 => {
						dAlign => 'right'
						head => 'Count'
						summarize => 'sum'

					}

				}

			-->
		</statement>

		<statement name="sel_patientsSeen">
			
			select value_textB as physician, count(value_textB) as count
			from Event e, Event_Attribute ea
			where ea.value_type = 333
			AND (? is NULL or e.facility_id = ?)
			AND (? is NULL or ea.value_textb = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			and e.event_id = ea.parent_id
			and e.start_time between to_date(? || ' 12?0 AM', 'MM/DD/YYYY HH12:MI AM') + ?
			and to_date(? || ' 11?9 PM', 'MM/DD/YYYY HH12:MI AM') + ?
			and e.event_status = 2
			group by ea.value_textB
			
			<report>
				<column heading="Physician" url="javascript:doActionPopup('#hrefSelfPopup#&detail=physician&physician=#&{?}#',
							null,'location,status,width=800,height=600,scrollbars,resizable')"/>
				<column heading="Count"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						head => 'Physician'
						hint => 'View Details'
						url => 'javascript:doActionPopup('#hrefSelfPopup#&detail=physician&physician=#&{?}#',
							null,'location,status,width=800,height=600,scrollbars,resizable')'

					}
					1 => {
						dAlign => 'right'
						head => 'Count'
						summarize => 'sum'

					}

				}

			-->
		</statement>

		<statement name="sel_patientsSeen_byPatientType">
			
			select caption as patient_type, count(caption) as count, Appt_Attendee_Type.id
			from Appt_Attendee_Type, Event e, Event_Attribute ea
			where ea.value_type = 333
			and e.event_id = ea.parent_id
			and (? is NULL or ea.value_textb = ?)
			and (? is NULL or e.facility_id = ?)
			AND EXISTS
			(
			SELECT 'x'
			FROM org
			WHERE owner_org_id = ?
			AND org_internal_id = e.facility_id
			)
			and e.start_time between to_date(? || ' 12?0 AM', 'MM/DD/YYYY HH12:MI AM') + ?
			and to_date(? || ' 11?9 PM', 'MM/DD/YYYY HH12:MI AM') + ?
			and e.event_status = 2
			and Appt_Attendee_Type.id = ea.value_int
			group by caption, Appt_Attendee_Type.id
			
			<report>
				<column heading="Patient type" url="javascript:doActionPopup('#hrefSelfPopup#&detail=patient_type&patient_type_id=#2#&patient_type_caption=#0#',
							null,'location,status,width=800,height=600,scrollbars,resizable')"/>
				<column heading="Count"/>
			</report>
			<!--
				columnDefn => {
					0 => {
						head => 'Patient type'
						hint => 'View Details'
						url => 'javascript:doActionPopup('#hrefSelfPopup#&detail=patient_type&patient_type_id=#2#&patient_type_caption=#0#',
							null,'location,status,width=800,height=600,scrollbars,resizable')'

					}
					1 => {
						dAlign => 'right'
						head => 'Count'
						summarize => 'sum'

					}

				}

			-->
		</statement>

	</sql-statements>
</xaf>